.\" Automatically generated by Pandoc 3.1.8
.\"
.TH "POWERKIT" "1" "January 2024" "Version 2.0.0" "PowerKit Documentation"
.SH NAME
\f[I]powerkit\f[R] - desktop independent full featured power manager
.SH SYNOPSIS
powerkit \f[I]\f[CI][--config]\f[I]\f[R]
.SH DESCRIPTION
powerkit is an desktop independent full featured power manager for
Linux, originally created for
\f[I]Slackware (http://www.slackware.com/)\f[R] for use with alternative
X11 desktop environments and window managers.
.IP \[bu] 2
Implements
\f[I]org.freedesktop.ScreenSaver (https://people.freedesktop.org/~hadess/idle-inhibition-spec/re01.html)\f[R]
service
.IP \[bu] 2
Implements
\f[I]org.freedesktop.PowerManagement (https://www.freedesktop.org/wiki/Specifications/power-management-spec/)\f[R]
service
.IP \[bu] 2
Automatically suspend on idle
.IP \[bu] 2
Automatically lock screen on idle
.IP \[bu] 2
Automatically hibernate or shutdown on critical battery
.IP \[bu] 2
Inhibit actions if external monitor(s) is connected
.IP \[bu] 2
Screen locking support (using XScreenSaver)
.IP \[bu] 2
Screen backlight support
.IP \[bu] 2
Screen hotplug support
.IP \[bu] 2
RTC wake alarm support
.IP \[bu] 2
CPU frequency scaling support
.IP \[bu] 2
Thermal support
.SH USAGE
powerkit should be started during the X11 user session.
Consult the documentation for your desktop environment or window manager
for launching startup applications.
.IP \[bu] 2
In \f[I]Fluxbox\f[R] add \f[I]\f[CI]powerkit &\f[I]\f[R] to the
\f[I]\f[CI]\[ti]/.fluxbox/startup\f[I]\f[R] file
.IP \[bu] 2
In \f[I]Openbox\f[R] add \f[I]\f[CI]powerkit &\f[I]\f[R] to the
\f[I]\f[CI]\[ti]/.config/openbox/autostart\f[I]\f[R] file.
.PP
\f[B]Do not run powerkit if your desktop environment already has a power
manager!\f[R]
.SS CONFIGURATION
The most common options are available directly from the system tray
icon, for more advanced options open \f[I]\f[CI]Settings\f[I]\f[R] from
the system tray menu or run \f[I]\f[CI]powerkit --conf\f[I]\f[R].
You should also be able to lauch the powerkit settings from your desktop
application menu (if available).
.SS SCREEN SAVER
powerkit depends on
\f[I]XScreenSaver (https://www.jwz.org/xscreensaver/)\f[R] to handle the
screen locking feature and screen poweroff, the default settings may
need to be adjusted.
You can launch the configuration GUI with the
\f[I]\f[CI]xscreensaver-demo\f[I]\f[R] command.
.PP
Recommended settings are:
.IP \[bu] 2
Mode: \f[I]\f[CI]Blank Screen Only\f[I]\f[R]
.IP \[bu] 2
Blank After: \f[I]\f[CI]5 minutes\f[I]\f[R]
.IP \[bu] 2
Lock Screen After: \f[I]\f[CI]enabled + 0 minutes\f[I]\f[R]
.IP \[bu] 2
Display Power Management: \f[I]\f[CI]enabled\f[I]\f[R]
.RS 2
.IP \[bu] 2
Standby After: \f[I]\f[CI]0 minutes\f[I]\f[R]
.IP \[bu] 2
Suspend After: \f[I]\f[CI]0 minutes\f[I]\f[R]
.IP \[bu] 2
Off After: \f[I]\f[CI]0 minutes\f[I]\f[R]
.IP \[bu] 2
Quick Power-off in Blank Only Mode: \f[I]\f[CI]enabled\f[I]\f[R]
.RE
.PP
Note that powerkit will start \f[I]XScreenSaver\f[R] during startup
(unless \f[I]org.freedesktop.ScreenSaver\f[R] is disabled).
.PP
Support for alternative screen savers can be added if needed.
.SS BACKLIGHT
The current display brightness (on laptops) can be adjusted with the
mouse wheel on the system tray icon or through the system tray menu.
.SS HIBERNATE
If hibernate \f[I]\[lq]just works\[rq]\f[R] depends on your system,
worst case a swap partition (or file) is needed by the kernel to support
hibernate, just add \f[I]\f[CI]resume=<swap_partition>\f[I]\f[R] to the
kernel command line in the boot loader.
.PP
\f[B]\f[BI]Consult your system documentation regarding
hibernation\f[B]\f[R].
.SS ICONS
powerkit will use the existing icon theme from the running desktop
environment.
You should have (a proper version) of Adwaita installed as a fallback.
.PP
You can override the icon theme in the
\f[I]\f[CI]\[ti]/.config/powerkit/powerkit.conf\f[I]\f[R] file, see
\f[I]\f[CI]icon_theme=<theme_name>\f[I]\f[R].
.SH FAQ
.SS How does an application inhibit the screen saver?
The preferred way to inhibit the screen saver from an application is to
use the \f[I]org.freedesktop.ScreenSaver\f[R] specification.
Any application that uses \f[I]org.freedesktop.ScreenSaver\f[R] will
work with powerkit.
.PP
Popular applications that uses this feature is Mozilla Firefox, Google
Chrome, VideoLAN VLC and many more.
.SS How does an application inhibit suspend actions?
The preferred way to inhibit suspend actions from an application is to
use the \f[I]org.freedesktop.PowerManagement\f[R] specification.
Any application that uses \f[I]org.freedesktop.PowerManagement\f[R] will
work with powerkit.
.PP
Common use cases are audio playback, downloading and more.
.SS Google Chrome/Chromium does not inhibit the screen saver!?
\f[I]Chrome (https://chrome.google.com)\f[R] does not use
\f[I]org.freedesktop.ScreenSaver\f[R] or
\f[I]org.freedesktop.PowerManagement\f[R] until it detects a supported
desktop environment \f[I](KDE/Xfce)\f[R].
Add the following to \f[I]\f[CI]\[ti]/.bashrc\f[I]\f[R] or the
\f[I]\f[CI]google-chrome\f[I]\f[R] launcher if you don\[cq]t run a
desktop environment:
.IP
.EX
export DESKTOP_SESSION=xfce
export XDG_CURRENT_DESKTOP=xfce
.EE
.SH REQUIREMENTS
powerkit requires the following dependencies:
.IP \[bu] 2
\f[I]X11 (https://www.x.org)\f[R]
.IP \[bu] 2
\f[I]Xss (https://www.x.org/archive//X11R7.7/doc/man/man3/Xss.3.xhtml)\f[R]
.IP \[bu] 2
\f[I]Xrandr (https://www.x.org/wiki/libraries/libxrandr/)\f[R]
.IP \[bu] 2
\f[I]Qt5 (https://qt.io)\f[R]
.IP \[bu] 2
\f[I]D-Bus (https://www.freedesktop.org/wiki/Software/dbus/)\f[R]
.IP \[bu] 2
\f[I]logind (https://www.freedesktop.org/wiki/Software/systemd/logind/)\f[R]
.IP \[bu] 2
\f[I]UPower (https://upower.freedesktop.org/)\f[R]
.IP \[bu] 2
\f[I]XScreenSaver (https://www.jwz.org/xscreensaver/)\f[R]
.SH BUILD
First make sure you have the required dependencies installed, then
review the most common build options:
.IP \[bu] 2
\f[I]\f[CI]CMAKE_INSTALL_PREFIX=</usr/local>\f[I]\f[R] - Install target.
\f[I]\f[CI]/usr\f[I]\f[R] recommended.
.IP \[bu] 2
\f[I]\f[CI]CMAKE_BUILD_TYPE=<Release/Debug>\f[I]\f[R] - Build type.
\f[I]\f[CI]Release\f[I]\f[R] recommended
.IP \[bu] 2
\f[I]\f[CI]SERVICE_USER=<root>\f[I]\f[R] - powerkitd owner, needs write
access to /sys.
Usually the \f[I]\f[CI]root\f[I]\f[R] user.
.IP \[bu] 2
\f[I]\f[CI]SERVICE_GROUP=<power>\f[I]\f[R] - Group that can access the
powerkitd service, this should be any desktop user that can change
screen brightness, CPU performance and RTC wake alarm.
Usually the \f[I]\f[CI]power\f[I]\f[R] group.
.PP
Now configure powerkit with CMake and build (\f[I]example for packaging
purposes\f[R]).
.IP
.EX
cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release ..
make
make DESTDIR=<package> install
.EE
.IP
.EX
pkg
|-- etc
|   |-- dbus-1
|   |   \[ga]-- system.d
|   |       \[ga]-- org.freedesktop.PowerKit.conf
|   \[ga]-- xdg
|       \[ga]-- autostart
|           \[ga]-- powerkit.desktop
\[ga]-- usr
    |-- bin
    |   \[ga]-- powerkit
    |-- libexec
    |   \[ga]-- powerkitd
    \[ga]-- share
        |-- applications
        |   \[ga]-- powerkit.desktop
        |-- dbus-1
        |   \[ga]-- system-services
        |       \[ga]-- org.freedesktop.PowerKit.service
        |-- doc
        |   \[ga]-- powerkit-VERSION
        |       |-- LICENSE
        |       \[ga]-- README.md
        \[ga]-- man
            |-- man1
            |   \[ga]-- powerkit.1
            \[ga]-- man8
                \[ga]-- powerkitd.8
.EE
.SH CHANGELOG
.SS 2.0.0 (TBA)
.IP \[bu] 2
Easier to use (minimal setup)
.IP \[bu] 2
New UI
.IP \[bu] 2
RTC wake alarm support
.RS 2
.IP \[bu] 2
Hibernate computer while suspended for X amount of time
.RE
.IP \[bu] 2
CPU frequency scaling and thermal support
.RS 2
.IP \[bu] 2
Intel PState
.RE
.IP \[bu] 2
powerkitd
.RS 2
.IP \[bu] 2
Service for unprivileged users (needed for CPU/RTC/brightness)
.RE
.SH OPTIONS
.TP
\f[I]\f[CI]--config\f[I]\f[R]
Launch configuration.
.SH FILES
.TP
\f[I]\f[CI]\[ti]/.config/powerkit/powerkit.conf\f[I]\f[R]
Per user configuration file.
.SH SEE ALSO
\f[B]\f[CB]xscreensaver\f[B]\f[R](1),
\f[B]\f[CB]xscreensaver-demo\f[B]\f[R](1),
\f[B]\f[CB]UPower\f[B]\f[R](7), \f[B]\f[CB]powerkitd\f[B]\f[R](8)
.SH BUGS
See \f[B]https://github.com/rodlie/powerkit/issues\f[R].
.SH COPYRIGHT
.IP
.EX
Copyright (c) Ole-André Rodlie <https://github.com/rodlie>
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

* Neither the name of the copyright holder nor the names of its
  contributors may be used to endorse or promote products derived from
  this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \[dq]AS IS\[dq]
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.EE
.SH AUTHORS
Ole-André Rodlie.
